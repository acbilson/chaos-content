+++
author = "Alex Bilson"
date = "2022-05-20T20:55:54.661569"
lastmod = "2022-05-20T20:55:54.661597"
+++
TODO: work out the rest of this JavaScript to fetch both logs and plants XML, get whatever was posted last year, and create a list of new elements to put on the page.

{{< highlight js >}}
fetch('./logs/index.xml').then(x => x.text()).then(x => parser.parseFromString(x, "text/xml")).then(page => {
console.log(page); 
const today = new Date();
const lastYear = new Date(today.getFullYear(), today.getMonth(), today.getDate());
const lastYearItems = Array.from(page.getElementsByTagName('pubDate')).filter(el => {
    const date = new Date(el.innerHTML);
    return date.getFullYear() === lastYear.getFullYear() &&
           date.getMonth() === lastYear.getMonth() &&
           date.getDate() === lastYear.getDate();
}).map(el => el.parentNode);

lastYearItems.forEach(el => console.log(el));
});
{{< /highlight >}}